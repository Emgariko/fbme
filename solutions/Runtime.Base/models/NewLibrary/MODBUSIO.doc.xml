<?xml version="1.0" encoding="UTF-8"?>  
<section xmlns="http://docbook.org/ns/docbook"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        xmlns:xlink="http://www.w3.org/1999/xlink">
  <info>
    <author>
       <personname>
          <firstname></firstname>
          <surname></surname>
       </personname>
       <email></email>
    </author>
    <abstract><wysiwyg_a><p>This function block implements internally a Modbus server.</p><p>The function block is internally used for MODBUS direct IO access, it provides data for the clients.</p><p>
</p><p>This is a generic function block, the number of Channels can be defined from 1 to 64, independently for the input (data to be written to the MODBUS process image) and the output side (data to be read from the MODBUS process image).</p><p>Input 'SD' and output 'RD' data type can be selected independently. Input 'default' data type depends on output 'RD'.</p><p>(More information about generic blocks: Studio help (press F1) at Solution→Distributed PAC Project→Editors→System Editor)</p><p>
</p><p /><p>
</p><p /><p>
</p><p /><p>
  </p></wysiwyg_a></abstract>
  </info>
<wysiwyg><p>
    <strong>Temporal Behavior</strong> </p><p>'INIT'-Event input: </p><p>- Captures the 'QI'-input</p><p>- If 'QI' is FALSE then</p><p>  - The FB will be deinitialized</p><p>  - The 'QO'-output is set to TRUE, when deinitializing was successful</p><p>  - 'STATUS'-output is blank, when deinitializing was successful </p><p>  - The 'INITO'-Event is fired</p><p>- If 'QI' is TRUE then</p><p>  - The FB is initialized</p><p>  - The 'QO'-output is set to TRUE, when initializing was successful </p><p>  - 'STATUS'-output is blank, when initializing was successful </p><p>  - Applies the new settings </p><p>  - The 'INITO'-Event is fired</p><p>- If an error is detected while initializing or deinitializing then</p><p>  - 'QO'-output is set to FALSE</p><p>  - 'STATUS'-output is set to an error message</p><p>  - The 'INITO'-Event is fired</p><p> </p><p>'LOAD_RETAIN'-Event input:</p><p>  - This event causes the FB to load the values from persistent memory, respectively, if they do not exist, the default values from 'default1-n', to make them available for a 'REQ'.</p><p>  - Should follow after 'INIT' to fetch initial data to work with.</p><p> </p><p /><p>
</p><p>'REQ'-Event input: </p><p>- If 'QI'-input is TRUE and 'INIT' has worked properly:</p><p>  - A triggered 'REQ' performs the sending of data from input 'SD' to client.</p><p>  - default values are <u>not</u> read by a 'REQ', only by a 'LOAD_RETAIN' event.</p><p>  - The 'CNF'-Event output is fired.</p><p>- If 'QI'-input is FALSE and the FB is deinitialized:</p><p>  - 'QO' is TRUE</p><p>  - 'STATUS'-output shows an error message not until an anew triggered 'INIT' (i.e.: Not initialized: REQ not allowed).</p><p>  - No data will be sent</p><p>  - The 'CNF'-Event is fired</p><p /><p /><p>
</p><p> </p><p>'INITO'-Event output:</p><p>This event is fired when the 'INIT'-Event has been processed (successfully or not). </p><p> </p><p /><p>
</p><p>'CNF'-Event output:</p><p>This event is fired when 'REQ'-Event has been processed (successfully or not). </p><p> </p><p /><p>'IND'-Event output:</p><p>This event is fired to signalize that data has arrived and is contained at output RD1-n. Any error will be indicated at QO and STATUS.</p><p> </p><p>'INDCHG'-Event Output:</p><p>This event is fired to signalize that at least one value at output RD1-n has changed with the last arriving data.</p><p> </p><p /><p>
</p><p><strong>Functional Behavior</strong></p><p>'QI'-input:</p><p>If the value is TRUE an initialization is performed, else all existing settings are cleared (deinitialization).</p><p> </p><p /><p>
</p><p>'SDn'-input:</p><p>Contains the data ready to be written to Client. Each REQ performs the transfer of this data to the client.</p><p> </p><p>'default'-input:</p><p>A 'LOAD_RETAIN' event causes the FB to use this default values, if no data from persistent memory is available (after "Delete Persistent Data" or the very first start of the solution).</p><p> </p><p /><p>
</p><p /><p>
</p><p>'QO'-output:</p><p>Shows the success of initialization or deinitialization. TRUE is successfully initialized or deinitialized, FALSE shows that an error with 'INIT' has occured.</p><p> </p><p /><p>
</p><p>'STATUS'-output:</p><p>It contains the specific error message if an error has occurred. If a 'REQ' is triggered but the FB is deinitialized, the error message 'Not initialized: REQ not allowed' appears after a new 'INIT' event.</p><p>When an input event ('INIT'- or 'REQ'-Event) has been successfully processed, there is no message.</p><p> </p><p>
</p><p>
</p><p /><p /><p>'RDn'-output:</p><p>Containes the data that has arrived from client ready to be used. An 'IND'-Event will be fired each time when new data is available at this output.</p><p>An 'INDCHG' is fired only if at least one value has changed.</p><p /><p>
</p><p /><p>
</p><p /><p>
  </p></wysiwyg></section>

