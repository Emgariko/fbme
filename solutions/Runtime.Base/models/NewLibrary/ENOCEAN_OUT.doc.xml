<?xml version="1.0" encoding="UTF-8"?>  
<section xmlns="http://docbook.org/ns/docbook"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        xmlns:xlink="http://www.w3.org/1999/xlink">
  <info>
    <author>
       <personname>
          <firstname>Hubert</firstname>
          <surname>Winkler</surname>
       </personname>
       <email>hubert.winkler@nxtcontrol.com</email>
    </author>
    <abstract><wysiwyg_a><p>EnOcean TX interface</p><p /><p>
  </p></wysiwyg_a></abstract>
  </info>
<wysiwyg><p>
    <strong>'INIT</strong>' with</p><p>   QI=TRUE: connects to busmaster ENOCEAN_STCEVC_DEV 'InterfaceID'. Triggers <strong>'INITO</strong>' with QO=TRUE, or QO=FALSE when the connection fails - Note: the master has to be INIT </p><p>first.</p><p>   QI=FALSE: deconnect from Master.</p><p><strong>'REQ'</strong> sends a EnOcean telegram with</p><p>'PkType' a BYTE: EnOcean TYPE/ORG/RORG/CHOICE </p><p>  16#05 for a EnOcean RPS telegram - rocker</p><p>  16#06 for a EnOcean 1BS telegram - contacts </p><p>  16#07 for a EnOcean 4BS telegram - actuators, HVAC..</p><p>The EnOcean standard V2.1 defines additional telegram types, and an alternative numbering of PkType (often referred as ORG, RORG or CHOICE), which have equal data definition :</p><p>  16#F6 for RPS </p><p>  16#D5 for 1BS   </p><p>  16#A5 for 4BS.</p><p>'DataByte0..3' BYTE, contains the 4 data bytes. The 1-Byte telegram types RPS and 1BS use DataByte3.</p><p>'StatusByte' is the received EnOcean-status byte, contains 4 status bits, and 2 bits transmission count, 2bit repeater count. Only RPS telegrams carry valuable information in the status bits, the counters should be 0. </p><p>The 32bit EnOcean-ID of the sent telegram is built from the Gateway_Enocean_ID + AepId [0..127]. Each gateway reserves a range of 128 unique EnOceanIds, the allocation and persistent storage is handled in the AEP_LIST Gateway function block ENOCEAN_STCEVC_DEV. A instantiated ENOCEAN_OUT gets its reserved number, a new one allocates the lowest free number. </p><p>Notification about successful transmission occurs in the ENOCEAN_STCEVC_DEV function block via 'IND' and STATUS="TX OK"</p><p>Notes:</p><p> EnOcean defines transmission order as 3,2,1,0. DataByte3 is the first one. 1-Byte Packets (RPS,1BS) use only DataByte3.</p><p> Gateway is the ENOCEAN_STCEVC_DEV function block with same 'InterfaceId'.</p><p> The Gateway must be set to mode "send 3 times" to overcome the RX/TX collisions on the RS485 bus.</p><p>
  </p></wysiwyg></section>

