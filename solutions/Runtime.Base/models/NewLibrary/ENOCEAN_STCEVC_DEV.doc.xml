<?xml version="1.0" encoding="UTF-8"?>  
<section xmlns="http://docbook.org/ns/docbook"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        xmlns:xlink="http://www.w3.org/1999/xlink">
  <info>
    <author>
       <personname>
          <firstname></firstname>
          <surname></surname>
       </personname>
       <email></email>
    </author>
    <abstract><wysiwyg_a><p>Interface to Thermokon STC65-RS485-EVC EnOcean-Serial-Gateway</p><p>support for send and receive of RPS/1BS/4BS telegrams</p><p /><p>
</p><p /><p>
  </p></wysiwyg_a></abstract>
  </info>
<wysiwyg><p>
   </p><p><strong>'INIT'</strong> with</p><p> 'QI'=TRUE initializes the bus <strong>InterfaceID</strong> with the serial interface parameters '<strong>Com'</strong>. </p><p> 'QI'=FALSE closes the serial device.</p><p>triggers <strong>'INITO'</strong> with</p><p> 'QO=TRUE : signals success, 'STATUS'="OK"</p><p> 'QO'=FALSE : signals failure with error message in 'STATUS'</p><p>Note: INIT of connected ENOCEAN_IN and ENOCEAN_OUT function blocks with same InterfaceID must be triggered after INIT, .</p><p> </p><p><strong>'REQ'</strong> with 'QI'=TRUE is used to send 'GatewayCommand' to the device when 'QI'=TRUE. </p><p> notifications via 'IND' are made later upon TX-start, tX-timeout, TX-repetitions and OK-acknowledge.</p><p><strong>'AEP_QUERY'</strong> with 'QI'=TRUE occurrence will refresh the '<em>AepList</em>' '<em>AepList'</em> and produce an '<em>AEP_IND'</em> event. <br /><em>AepList</em> is a listing of all registered actuator end points in the form of &lt;apath0&gt;,&lt;aid0&gt;|&lt;apath1&gt;,&lt;aid2&gt;|&lt;apathN&gt;,&lt;aidN&gt;<br /><em>&lt;apath&gt;</em> is of type STRING and represents the path to the ENOCEAN_OUT FB ex. CAT1.CAT2.Composite1.Composite2.enOceanOut1<br /><em>&lt;aid&gt;</em> is of type UINT and represents the actuator adress ex. 123</p><p><strong>'AEP_ADD'</strong> Occurrence will add an new actuator with '<em>AepPath'</em> and <em>'AepId'</em> to the '<em>AepList'</em> and produce an '<em>AEP_IND'</em> event <br />If the given <em>AepId</em> is already assigned to some other <em>AepPath</em> in the <em>AepList</em> the request fails with an error message</p><p><strong>'AEP_DEL'</strong> will delete an actuator from the <em>aepList</em> and produce an <em>AEP_IND</em> event</p><p>'<em>AepPath</em>' with <em>*</em> as content will delete the whole list</p><p>'<em>AepPath</em>' with <em>'' emtpy string</em> as content will delete the entry that matches <em>AepId</em> </p><p>'<em>AepPath</em>' with <em>&lt;some.path&gt;</em> as content (without braces) will delete the entry that matches <em>AepPath</em>, <em>AepId</em> will not be evaluated </p><p>Input Variables:</p><p>QI =TRUE enables the triggered action, QI=FALSE disables the action.</p><p>'InterfaceID' is a string defining the bus, and to describe the EnOcean gateway and all connected ENOCEAN_IN and ENOCEAN_OUT function blocks. e.g. "EnOcean1". Spaces are allowed.</p><p>'Com' is the serial device and parameters as used in SERIALIO. Default is "dev=COM1: baudrate=9600 bits=8 stopbits=1 parity=odd", in Linux/CUB use dev=/dev/ttyAPP0</p><p>'GatewayAddress' must match the DIP-switch setting 0..63 of the gateway [default 0].</p><p>'GatewayCommand' is used to send proprietary control commands to the gateway. It is a Hex-String with 2 characters per byte, the message is prepended with the necessary Sync bytes A5 5A, then the defined data is filled, afterwards padded with zeros, checksum calculation, GatewayAddress. </p><p>Some examples: </p><p>AB 58  : read the Gateway -Enocean Id</p><p>FF FF FF 00 FF  : set mode Gateway with 3x transmission</p><p>6B 05 0 0 0 0 12345678 0 :  prepend any regular enocean telegram with 6B</p><p>'AepPath' is used to identify an ENOCEAN_OUT function block in AEP_ADD and AEP_DEL. Besides the special setting "*" and "" (empty) id is the Function Block name. if AepList is "RES0.FB3,2|RES0.FB2,0", to address the 2nd entry enter "RES.FB2"  Note: the " are not part of the strings. </p><p>'AepId' is the sender id 0..127 used in AEP_ADD and optionally in AEP_DEL</p><p> </p><p><strong>Output Events</strong></p><p><strong>'INITO'</strong> is the response for 'INIT', errors </p><p>success with QO=TRUE, STATUS="OK" or "TX OK", or harmless information as "repeated", "1st/2nd/3rd TX#2", "TX#1/2 timeout", "</p><p>QO=FALSE, STATUS="TX#3 timeout", "chksum", "RX Error", "SYNC1 error", these indicate hardware problems.</p><p> </p><p><strong>'IND'</strong> : Events releated to RX and TX of EnOcean messages. </p><p>success with 'QO'=TRUE, 'STATUS'="OK" or "TX OK", </p><p>error with 'QO'=FALSE, 'STATUS'=error message</p><p>'Message' is the associated EnOcean message, received or transmitted.</p><p>Upon RX, "OK", "repeated", chksum fail</p><p> </p><p>A normal receive sequence looks like</p><p>IND QO=TRUE STATUS="OK" MESSAGE="GW:0 ORG:05 DB:00 00 00 00 ID:002A7362 st:20" : delivered to ENOCEAN_IN</p><p>IND QO=TRUE STATUS="repeated" MESSAGE="GW:0 ORG:05 DB:00 00 00 00 ID:002A7362 st:24" : repetition, skipped</p><p>IND QO=TRUE STATUS="repeated" MESSAGE="GW:0 ORG:05 DB:00 00 00 00 ID:002A7362 st:28" : repetition 2, skipped, this strings stay visible during watch</p><p> </p><p>Note: Transmission via ENOCEAN_OUT or 'REQ'-GatewayCommand fires 3 IND events in short time, Watching finally shows the latest result.</p><p>IND QO=TRUE STATUS="1st TX" MESSAGE="GW:0 ORG:58 DB:00 00 00 00 ID:00000000 st:00" : send a 'AB 58 ' GatewayCommand, the 'AB'  is not visible not shown here </p><p>IND QO=TRUE STATUS="OK" MESSAGE="GW:0 ORG:98 DB:FF ED 90 80 ID:00000000 st:00"  : received a GW-ID message from gateway with its ID as data</p><p>IND QO=TRUE STATUS="TX OK" MESSAGE="GW:0 ORG:58 DB:00 00 00 00 ID:00000000 st:00" :  this stays visible during watch</p><p> </p><p>TX failure will end </p><p> </p><p><strong>'AEP_IND'</strong> : Response for each AEP_QUERY, AEP_ADD and AEP_DEL Input Event, fills current AepList, </p><p> success with QO=TRUE, STATUS="OK"</p><p> error with QO=FALSE, STATUS=error message : AepId already used|AepPath: no connected output found|GatewayAddress must be in range 0..63|AepId not used|AepPath not found</p><p>AepList is a ist of the entries , "&lt;name0&gt;,&lt;id0&gt;|&lt;name1&gt;,&lt;id1&gt;|...|&lt;nameN&gt;,&lt;idN&gt;". Ordered by internal hash value.</p><p> </p><p /><p>
</p><p /><p>
  </p></wysiwyg></section>
